<div class="container">
  <div class="card-title">
    <div class="button-back">
      <app-ip-button-modal
        class="btn-white"
        typeBtn="submit"
        size="small"
        (clicked)="back()"
      >
        <img src="assets/new-styles/icons/arrow-back.svg" />
      </app-ip-button-modal>
    </div>
    <h2 class="title">{{ 'IP.REVENUE_DETAILS.TITLE' | translate }}</h2>
  </div>

  <form [formGroup]="detailedInfoForm">
    <div class="card">
      <div class="sections-titles">
        <!--se ve siempre que se abre la pagina-->
        <h3
          [class.active]="activeSection === 'transaction'"
          (click)="showTransactionSection()"
        >
          {{ 'IP.REVENUE_DETAILS.TRANSACTION' | translate }}
        </h3>
        <!--se ven solo cuando la recaudacion esta consolidada-->
        <h3
          *ngIf="isRevenueConsolidated"
          [class.active]="activeSection === 'conciliation'"
          (click)="showConciliationSection()"
        >
          {{ 'IP.TABLE.CONSOLIDATED.PAY_IN.CONCILIATION' | translate }}
        </h3>
        <h3
          *ngIf="isRevenueConsolidated"
          [class.active]="activeSection === 'policy'"
          (click)="showPolicySection()"
        >
          {{ 'IP.ADMIN_TABLE.POLICYAMOUNT' | translate }}
        </h3>
      </div>

      <!--SECCION TRANSACCION-->
      <div *ngIf="showTransaction">
        <div class="inputs">
          <div class="card-input">
            <label for="revenueDate">{{ 'IP.REVENUE_DETAILS.REVENUE_DATE' | translate }}</label>
            <app-ip-input
              inputId="revenueDate"
              [control]="getControl('revenueDate')"
              label=""
              type="text"
            ></app-ip-input>
          </div>

          <div class="card-input">
            <label for="amountRevenue">{{ 'IP.ACCOUNTABILITY-DETAILS.AMOUNT' | translate }}</label>
            <app-ip-input
              inputId="amountRevenue"
              [control]="getControl('amountRevenue')"
              label=""
              type="text"
            ></app-ip-input>
          </div>

          <div class="card-input">
            <label for="paymentChannel">{{ 'IP.ADMIN_TABLE.PAYMENTCHANNEL' | translate }}</label>
            <app-ip-input
              inputId="paymentChannel"
              [control]="getControl('paymentChannel')"
              label=""
              type="text"
            ></app-ip-input>
          </div>

          <div class="card-input">
            <label for="paymentEntity">{{ 'IP.ADMIN_TABLE.PAYMENTPROVIDER' | translate }}</label>
            <app-ip-input
              inputId="paymentEntity"
              [control]="getControl('paymentEntity')"
              label=""
              type="text"
            ></app-ip-input>
          </div>

          <div class="card-input">
            <label for="transactionObservations">{{ 'IP.BILL_DETAILS.COMMENTS' | translate }}</label>
            <app-ip-text-area-input
              inputId="transactionObservations"
              [control]="getControl('transactionObservations')"
              label=""
            ></app-ip-text-area-input>
          </div>
        </div>
      </div>

      <!--SECCION CONCILIACION-->
      <div *ngIf="showConciliation">
        <div class="inputs">
          <div class="card-input">
            <label for="isConsolidated">{{ 'IP.ADMIN_TABLE.ISCONSOLIDATED' | translate }}</label>
            <app-ip-input
              inputId="isConsolidated"
              [control]="getControl('isConsolidated')"
              label=""
              type="text"
            ></app-ip-input>
          </div>

          <div class="card-input">
            <label for="productName">{{ 'IP.ADMIN_TABLE.PRODUCTNAME' | translate }}</label>
            <app-ip-input
              inputId="productName"
              [control]="getControl('productName')"
              label=""
              type="text"
            ></app-ip-input>
          </div>

          <div class="card-input">
            <label for="policyNumber">{{ 'IP.ADMIN_TABLE.POLICYNUMBER' | translate }}</label>
            <app-ip-input
              inputId="policyNumber"
              [control]="getControl('policyNumber')"
              label=""
              type="text"
            ></app-ip-input>
          </div>

          <div class="card-input">
            <label for="amountPolicy">{{ 'IP.ADMIN_TABLE.POLICYAMOUNT' | translate }}</label>
            <app-ip-input
              inputId="amountPolicy"
              [control]="getControl('amountPolicy')"
              label=""
              type="text"
            ></app-ip-input>
          </div>

          <div class="card-input">
            <label for="brokerName">{{ 'IP.ADMIN_TABLE.BROKERNAME' | translate }}</label>
            <app-ip-input
              inputId="brokerName"
              [control]="getControl('brokerName')"
              label=""
              type="text"
            ></app-ip-input>
          </div>

          <div class="card-input">
            <label for="payNumber">{{ 'IP.REVENUE_DETAILS.PAY_NUMBER' | translate }}</label>
            <app-ip-input
              inputId="payNumber"
              [control]="getControl('payNumber')"
              label=""
              type="text"
            ></app-ip-input>
          </div>

          <div class="card-input">
            <label for="payAmount">{{ 'IP.REVENUE_DETAILS.PAY_VALUE' | translate }}</label>
            <app-ip-input
              inputId="payAmount"
              [control]="getControl('payAmount')"
              label=""
              type="text"
            ></app-ip-input>
          </div>
        </div>
      </div>

      <!--SECCION POLIZA-->
      <div *ngIf="showPolicy">
        <div class="inputs">
          <div class="card-input">
            <label for="productNamePolicy">{{ 'IP.ADMIN_TABLE.PRODUCTNAME' | translate }}</label>
            <app-ip-input
              inputId="productNamePolicy"
              [control]="getControl('productNamePolicy')"
              label=""
              type="text"
            ></app-ip-input>
          </div>

          <div class="card-input">
            <label for="policyNumberPolicy">{{ 'IP.ADMIN_TABLE.POLICYNUMBER' | translate }}</label>
            <app-ip-input
              inputId="policyNumberPolicy"
              [control]="getControl('policyNumberPolicy')"
              label=""
              type="text"
            ></app-ip-input>
          </div>

          <div class="card-input">
            <label for="amountPolicyPolicy">{{ 'IP.ADMIN_TABLE.POLICYAMOUNT' | translate }}</label>
            <app-ip-input
              inputId="amountPolicyPolicy"
              [control]="getControl('amountPolicyPolicy')"
              label=""
              type="text"
            ></app-ip-input>
          </div>

          <div class="card-input">
            <label for="saleDate">{{'IP.ADMIN_TABLE.SALEDATE' | translate}}</label>
            <app-ip-input
              inputId="saleDate"
              [control]="getControl('saleDate')"
              label=""
              type="text"
            ></app-ip-input>
          </div>

          <div class="card-input">
            <label for="premiumAmount">{{'IP.ADMIN_TABLE.PREMIUMAMOUNT' | translate}}</label>
            <app-ip-input
              inputId="premiumAmount"
              [control]="getControl('premiumAmount')"
              label=""
              type="text"
            ></app-ip-input>
          </div>
        </div>
        <div class="policy-title">
          <h3>{{ 'IP.SALE_DETAILS.SUBTITLE_PLAN' | translate }}</h3>
        </div>
        <div class="table-view">
          <app-table
            *ngIf="tableData.length > 0"
            [propertyOrder]="propertyOrder"
            [data]="tableData"
            [keyTranslate]="keyTranslate"
            [tableStyle]="'invopay'"
            [initTable]="initTable"
            [scroll]="scroll"
            (action)="onAction($event)"
            (selectedItemsChange)="onSelectedItemsChange($event)"
          >
          </app-table>
        </div>

        <!--Mostrar si es mobile-->
        <!--Hacer card la info para mobile-->
        <div class="card-view" *ngFor="let item of tableData">
          <div class="card-header">
            <span class="card-id">NÂ°{{ item.installmentNumber }}</span>
          </div>

          <div class="card-row-mobile">
            <label>{{'IP.ADMIN_TABLE.DUEDATE' | translate}}</label>
            <span>{{ item.dueDate | date : "dd/MM/yyyy" }}</span>
          </div>

          <div class="card-row-mobile">
            <label>{{'IP.ADMIN_TABLE.AMOUNT' | translate}}</label>
            <span class="card-amount">{{ item.amount }}</span>
          </div>
        </div>
      </div>
    </div>
  </form>
</div>
