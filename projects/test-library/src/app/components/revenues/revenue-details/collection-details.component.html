<div class="revenue-details" *ngIf="!(loadingService.isLoading$ | async)">
  <div class="revenue-details__header">
    <div class="revenue-details__button-back">
      <app-ip-button-modal
        class="revenue-details__btn-white"
        typeBtn="submit"
        size="small"
        (clicked)="back()"
      >
        <img src="assets/new-styles/icons/arrow-back.svg" />
      </app-ip-button-modal>
    </div>
    <h2 class="revenue-details__title">{{ 'IP.REVENUE_DETAILS.TITLE' | translate }}</h2>
  </div>

  <form class="revenue-details__form" [formGroup]="detailedInfoForm">
    <div class="revenue-details__card">
      <div class="revenue-details__sections-titles">
        <!--se ve siempre que se abre la pagina-->
        <h3
          class="revenue-details__section-title"
          [class.revenue-details__section-title--active]="activeSection === 'transaction'"
          (click)="showTransactionSection()"
        >
          {{ 'IP.REVENUE_DETAILS.TRANSACTION' | translate }}
        </h3>
        <!--se ven solo cuando la recaudacion esta consolidada-->
        <h3
          *ngIf="isRevenueConsolidated"
          class="revenue-details__section-title"
          [class.revenue-details__section-title--active]="activeSection === 'conciliation'"
          (click)="showConciliationSection()"
        >
          {{ 'IP.TABLE.CONSOLIDATED.PAY_IN.CONCILIATION' | translate }}
        </h3>
        <h3
          *ngIf="isRevenueConsolidated"
          class="revenue-details__section-title"
          [class.revenue-details__section-title--active]="activeSection === 'policy'"
          (click)="showPolicySection()"
        >
          {{ 'IP.ADMIN_TABLE.POLICYAMOUNT' | translate }}
        </h3>
      </div>

      <!--SECCION TRANSACCION-->
      <div class="revenue-details__section" *ngIf="showTransaction">
        <div class="revenue-details__inputs">
          <div class="revenue-details__input-wrapper">
            <app-ip-input
              inputId="revenueDate"
              [control]="getControl('revenueDate')"
              [label]="'IP.REVENUE_DETAILS.REVENUE_DATE' | translate"
              type="text"
            ></app-ip-input>
          </div>

          <div class="revenue-details__input-wrapper">
            <app-ip-input
              inputId="amountRevenue"
              [control]="getControl('amountRevenue')"
              [label]="'IP.ACCOUNTABILITY-DETAILS.AMOUNT' | translate"
              type="text"
            ></app-ip-input>
          </div>

          <div class="revenue-details__input-wrapper">
            <app-ip-input
              inputId="paymentChannel"
              [control]="getControl('paymentChannel')"
              [label]="'IP.ADMIN_TABLE.PAYMENTCHANNEL' | translate"
              type="text"
            ></app-ip-input>
          </div>

          <div class="revenue-details__input-wrapper">
            <app-ip-input
              inputId="paymentEntity"
              [control]="getControl('paymentEntity')"
              [label]="'IP.ADMIN_TABLE.PAYMENTPROVIDER' | translate"
              type="text"
            ></app-ip-input>
          </div>

          <div class="revenue-details__input-wrapper revenue-details__input-wrapper--full">
            <app-ip-text-area-input
              inputId="transactionObservations"
              [control]="getControl('transactionObservations')"
              [label]="'IP.BILL_DETAILS.COMMENTS' | translate"
            ></app-ip-text-area-input>
          </div>
        </div>
      </div>

      <!--SECCION CONCILIACION-->
      <div class="revenue-details__section" *ngIf="showConciliation">
        <div class="revenue-details__inputs">
          <div class="revenue-details__input-wrapper">
            <app-ip-input
              inputId="isConsolidated"
              [control]="getControl('isConsolidated')"
              [label]="'IP.ADMIN_TABLE.ISCONSOLIDATED' | translate"
              type="text"
            ></app-ip-input>
          </div>

          <div class="revenue-details__input-wrapper">
            <app-ip-input
              inputId="productName"
              [control]="getControl('productName')"
              [label]="'IP.ADMIN_TABLE.PRODUCTNAME' | translate"
              type="text"
            ></app-ip-input>
          </div>

          <div class="revenue-details__input-wrapper">
            <app-ip-input
              inputId="policyNumber"
              [control]="getControl('policyNumber')"
              [label]="'IP.ADMIN_TABLE.POLICYNUMBER' | translate"
              type="text"
            ></app-ip-input>
          </div>

          <div class="revenue-details__input-wrapper">
            <app-ip-input
              inputId="amountPolicy"
              [control]="getControl('amountPolicy')"
              [label]="'IP.ADMIN_TABLE.POLICYAMOUNT' | translate"
              type="text"
            ></app-ip-input>
          </div>

          <div class="revenue-details__input-wrapper">
            <app-ip-input
              inputId="brokerName"
              [control]="getControl('brokerName')"
              [label]="'IP.ADMIN_TABLE.BROKERNAME' | translate"
              type="text"
            ></app-ip-input>
          </div>

          <div class="revenue-details__input-wrapper">
            <app-ip-input
              inputId="payNumber"
              [control]="getControl('payNumber')"
              [label]="'IP.REVENUE_DETAILS.PAY_NUMBER' | translate"
              type="text"
            ></app-ip-input>
          </div>

          <div class="revenue-details__input-wrapper">
            <app-ip-input
              inputId="payAmount"
              [control]="getControl('payAmount')"
              [label]="'IP.REVENUE_DETAILS.PAY_VALUE' | translate"
              type="text"
            ></app-ip-input>
          </div>
        </div>
      </div>

      <!--SECCION POLIZA-->
      <div class="revenue-details__section" *ngIf="showPolicy">
        <div class="revenue-details__inputs">
          <div class="revenue-details__input-wrapper">
            <app-ip-input
              inputId="productNamePolicy"
              [control]="getControl('productNamePolicy')"
              [label]="'IP.ADMIN_TABLE.PRODUCTNAME' | translate"
              type="text"
            ></app-ip-input>
          </div>

          <div class="revenue-details__input-wrapper">
            <app-ip-input
              inputId="policyNumberPolicy"
              [control]="getControl('policyNumberPolicy')"
              [label]="'IP.ADMIN_TABLE.POLICYNUMBER' | translate"
              type="text"
            ></app-ip-input>
          </div>

          <div class="revenue-details__input-wrapper">
            <app-ip-input
              inputId="amountPolicyPolicy"
              [control]="getControl('amountPolicyPolicy')"
              [label]="'IP.ADMIN_TABLE.POLICYAMOUNT' | translate"
              type="text"
            ></app-ip-input>
          </div>

          <div class="revenue-details__input-wrapper">
            <app-ip-input
              inputId="saleDate"
              [control]="getControl('saleDate')"
              [label]="'IP.ADMIN_TABLE.SALEDATE' | translate"
              type="text"
            ></app-ip-input>
          </div>

          <div class="revenue-details__input-wrapper">
            <app-ip-input
              inputId="premiumAmount"
              [control]="getControl('premiumAmount')"
              [label]="'IP.ADMIN_TABLE.PREMIUMAMOUNT' | translate"
              type="text"
            ></app-ip-input>
          </div>
        </div>
        <div class="revenue-details__policy-title">
          <h3>{{ 'IP.SALE_DETAILS.SUBTITLE_PLAN' | translate }}</h3>
        </div>
        <div class="revenue-details__table-view">
          <app-table
            *ngIf="tableData.length > 0"
            [propertyOrder]="propertyOrder"
            [data]="tableData"
            [keyTranslate]="keyTranslate"
            [tableStyle]="'invopay'"
            [initTable]="initTable"
            [scroll]="scroll"
            (action)="onAction($event)"
            (selectedItemsChange)="onSelectedItemsChange($event)"
          >
          </app-table>
        </div>

        <!--Mostrar si es mobile-->
        <!--Hacer card la info para mobile-->
        <div class="revenue-details__card-view" *ngFor="let item of tableData">
          <div class="revenue-details__card-header">
            <span class="revenue-details__card-id">NÂ°{{ item.installmentNumber }}</span>
          </div>

          <div class="revenue-details__card-row-mobile">
            <label class="revenue-details__card-label">{{'IP.ADMIN_TABLE.DUEDATE' | translate}}</label>
            <span class="revenue-details__card-value">{{ item.dueDate | date : "dd/MM/yyyy" }}</span>
          </div>

          <div class="revenue-details__card-row-mobile">
            <label class="revenue-details__card-label">{{'IP.ADMIN_TABLE.AMOUNT' | translate}}</label>
            <span class="revenue-details__card-value revenue-details__card-value--amount">{{ item.amount }}</span>
          </div>
        </div>
      </div>
    </div>
  </form>
</div>